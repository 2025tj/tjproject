# chlorella71 TJP 프로젝트 대화 내용 요약

## 📋 대화 개요
- **프로젝트**: TJP (JWT 기반 인증과 구독 시스템을 갖춘 SaaS 플랫폼)
- **구현자**: chlorella71
- **기술 스택**: Spring Boot (백엔드) + React (프론트엔드)
- **대화 일시**: 2025년 8월 14일

---

## 🎯 주요 질문 및 답변

### 1. 프로젝트 구현 내용 정리
**질문**: "react와 tjp에서 chlorella71이 구현한 내용들 프로젝트 발표때 내가 담당한 부분으로 발표해야하거든 정리해볼래"

**답변 요약**:
- **백엔드**: 인증 시스템, 사용자 관리, 구독 시스템, 관리자 기능, 보안 시스템
- **프론트엔드**: 인증 컴포넌트, 구독 관리, 관리자 대시보드, 상태 관리
- **주요 특징**: 완전한 인증 시스템, 구독 기반 비즈니스 모델, 관리자 도구, 보안 강화

### 2. 이메일 인증 재전송 문제
**질문**: "지금 왜 이메일 인증 기간이 유효된 후에 로그인시 프론트에서 메시지는 출력되는데 이메일 재전송이 실행이 안되지?"

**답변 요약**:
- **문제점**: 트랜잭션 롤백으로 인한 이벤트 발행 실패
- **원인**: `@TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)` 사용
- **해결책**: 이벤트 대신 직접 이메일 발송 또는 `BEFORE_COMMIT` 사용

### 3. Redis 블랙리스트 토큰 확인
**질문**: "지금 코드에서 블랙리스트 처리된 리프레시토큰들을 redis cli에서 보는 명령어 뭐야?"

**답변 요약**:
- **명령어**: `KEYS "bl:refresh*"` (블랙리스트), `KEYS "rt:user:*"` (사용자별 토큰)
- **키 패턴**: `bl:refresh{토큰값}`, `rt:user:{이메일}`
- **상세 정보**: `GET`, `TTL`, `PTTL` 명령어로 값과 만료시간 확인

### 4. DDD 설계 여부
**질문**: "tjp에서 service에도 비즈니스 로직을 넣었던거 같은데 지금 설계된게 ddd가 맞아?"

**답변 요약**:
- **현재 상태**: DDD와 전통적 계층형 아키텍처가 혼재된 하이브리드 설계
- **DDD 요소**: 도메인 중심 패키지 구조, 엔티티에 일부 도메인 로직
- **문제점**: 서비스 레이어에 과도한 책임, 인프라와 도메인 로직 혼재
- **개선 방향**: 도메인 서비스 분리, 애플리케이션 서비스로 조율

### 5. Axios 사용법 상세 설명
**질문**: "react에서 axios를 사용점에 대해서 자세히 설명해봐"

**답변 요약**:
- **아키텍처**: 계층화된 API 구조 (client.js, apiWrapper.js, apiUtils.js)
- **인터셉터**: 요청 시 자동 토큰 추가, 응답 시 자동 토큰 갱신
- **토큰 관리**: Access Token은 헤더, Refresh Token은 쿠키로 자동 처리
- **에러 처리**: 401 에러 시 자동 토큰 갱신 및 재시도

### 6. 토큰 전송 방식 차이
**질문**: "요청에 axios interceptor가 accesToken을 담아 보내고 응답에서 왜 refreshToken이 담기지?"

**답변 요약**:
- **요청 시**: Access Token을 Authorization 헤더에 추가
- **응답 시**: Access Token은 헤더에서 추출, Refresh Token은 쿠키로 자동 저장
- **설계 이유**: 보안(짧은 수명 vs 긴 수명), 자동화(투명한 토큰 갱신)

### 7. Refresh Token 발급 정책
**질문**: "지금 이프로젝트는 매요청시 새 리프레시토큰을 발급받게되어있나? 아니면 새로고침하거나 만료될때만 발급받게되어있나?"

**답변 요약**:
- **정책**: Refresh Token Rotation (회전) 정책 사용
- **발급 시점**: 로그인 시, 토큰 갱신 시에만 새로 발급
- **보안**: 사용된 토큰은 즉시 블랙리스트에 등록하여 재사용 방지
- **일반 요청**: Access Token만 사용, Refresh Token은 변경 없음

### 8. 사용자 흐름도 정리
**질문**: "이 프로젝트의 사용자흐름도를 chlorella71이 구현한 부분만 정리해봐"

**답변 요약**:
- **신규 사용자**: 회원가입 → 이메일 인증 → 로그인 → 구독 선택 → 결제 → 서비스 이용
- **기존 사용자**: 로그인 → 자동 토큰 갱신 → 서비스 이용
- **인증 시스템**: 로컬/OAuth2 로그인, 자동 토큰 갱신, 이메일 인증
- **구독 시스템**: 플랜 선택, 결제, 관리, 해지, 환불
- **관리자 기능**: 사용자 관리, 환불 처리, 토큰 관리

### 9. 발표 스크립트 작성
**질문**: "chlorella71이 구현한 기능들을 발표하는 발표스크립트 짜볼래"

**답변 요약**:
- **발표 시간**: 10-15분
- **구성**: 프로젝트 소개 → 인증 시스템 → 구독 시스템 → 관리자 기능 → 프론트엔드 → 아키텍처 → 핵심 성과
- **핵심 메시지**: 보안과 사용성을 모두 고려한 인증 시스템, 실제 비즈니스 적용 가능한 구독 시스템

---

## 💡 핵심 기술적 내용

### JWT 인증 시스템
- Access Token (10분) + Refresh Token (7일)
- 토큰 회전 정책으로 보안 강화
- 자동 토큰 갱신 및 재시도

### 구독 시스템
- 3단계 요금제 (체험/월간/연간)
- Iamport 결제 연동
- 자동 만료 및 환불 처리

### 보안 기능
- HttpOnly 쿠키 사용
- 토큰 블랙리스트 관리
- CSRF 방지

### 프론트엔드 아키텍처
- Redux Toolkit 상태 관리
- Axios 인터셉터로 자동 토큰 관리
- Feature-based 폴더 구조

---

## 🏗️ 프로젝트 완성도

### 구현 완료된 기능
- ✅ 완전한 인증 시스템 (로컬 + OAuth2)
- ✅ 구독 및 결제 시스템
- ✅ 관리자 기능
- ✅ 프론트엔드 상태 관리
- ✅ 보안 시스템

### 기술적 특징
- ✅ JWT 토큰 회전 정책
- ✅ 자동 토큰 갱신
- ✅ Redis 기반 토큰 관리
- ✅ 반응형 UI
- ✅ 확장 가능한 아키텍처

---

## 🎯 발표 시 강조 포인트

1. **보안성**: 토큰 회전, 블랙리스트 관리 등 보안 강화
2. **사용성**: 자동 토큰 갱신으로 끊김 없는 서비스
3. **실용성**: 실제 결제 시스템 연동으로 비즈니스 적용 가능
4. **확장성**: OAuth2 전략 패턴, 도메인별 모듈화
5. **완성도**: SaaS 플랫폼의 핵심 기능을 모두 구현

---

## 📚 발표 스크립트

### 발표 개요
**제목**: "TJP - JWT 기반 인증과 구독 시스템을 갖춘 SaaS 플랫폼"
**발표 시간**: 10-15분
**대상**: 개발팀 및 기술 리더

### 발표 구성
1. **프로젝트 소개** (2분)
2. **인증 시스템 구현** (3분)
3. **구독 시스템 구현** (3분)
4. **관리자 기능 구현** (2분)
5. **프론트엔드 구현** (2분)
6. **아키텍처 설계** (2분)
7. **핵심 성과 및 특징** (1분)
8. **마무리** (30초)

### 핵심 메시지
- **보안과 사용성을 모두 고려한 인증 시스템**
- **실제 비즈니스에 적용 가능한 구독 시스템**
- **확장 가능하고 유지보수하기 쉬운 아키텍처**

---

## 📝 참고 자료

이 요약본은 chlorella71이 구현한 TJP 프로젝트의 모든 핵심 내용을 포함하고 있으며, 발표 준비나 프로젝트 설명 시 참고 자료로 활용할 수 있습니다.

**생성일**: 2025년 8월 14일
**생성자**: AI Assistant
**프로젝트**: TJP SaaS 플랫폼
